<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YZUR Docs Home</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">YZUR – Year Zero Universal Roller</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/Stefouch/foundry-year-zero-roller"
                        >
                            Github
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://stefouch.be"
                        >
                            Stefouch
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="YearZeroDie.html">YearZeroDie</a></li><li><a href="YearZeroRoll.html">YearZeroRoll</a></li><li><a href="YearZeroRollManager.html">YearZeroRollManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#YZUR">YZUR</a></li></ul></div><div class="category"><h2>OTHER DICE</h2><h3>Classes</h3><ul><li><a href="AmmoDie.html">AmmoDie</a></li><li><a href="ArtifactDie.html">ArtifactDie</a></li><li><a href="BaseDie.html">BaseDie</a></li><li><a href="BladeRunnerDie.html">BladeRunnerDie</a></li><li><a href="GearDie.html">GearDie</a></li><li><a href="LocationDie.html">LocationDie</a></li><li><a href="NegativeDie.html">NegativeDie</a></li><li><a href="SkillDie.html">SkillDie</a></li><li><a href="StressDie.html">StressDie</a></li><li><a href="TwilightDie.html">TwilightDie</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p></p>
                    <h1>Home</h1>
                </header>
                



    


    <h3> </h3>










    




    <section>
        <article><h1 align="center">YZUR<br/>Year Zero Universal Roller</h1>
<p align="center">
  <img alt="Version" src="https://img.shields.io/badge/dynamic/json?color=blue&label=version&query=version&url=https%3A%2F%2Fraw.githubusercontent.com%2FStefouch%2Ffoundry-year-zero-roller%2Fmaster%2Fsystem.json"/>
  <a href="https://foundryvtt.com" target="_blank">
    <img alt="Foundry Version" src="https://img.shields.io/badge/dynamic/json?color=blue&label=Foundry&query=compatibility.minimum&url=https%3A%2F%2Fraw.githubusercontent.com%2FStefouch%2Ffoundry-year-zero-roller%2Fmaster%2Fsystem.json"/>
  </a>
  <a href="https://github.com/Stefouch/foundry-year-zero-roller/releases">
    <img alt="Downloads" src="https://img.shields.io/github/downloads/Stefouch/foundry-year-zero-roller/latest/yzur.js"/>
  </a>
  <a href="https://github.com/Stefouch/foundry-year-zero-roller/graphs/commit-activity" target="_blank">
    <img alt="Maintenance" src="https://img.shields.io/badge/Maintained%3F-yes-green.svg"/>
  </a>
  <a href="https://github.com/Stefouch/foundry-year-zero-roller/blob/master/LICENSE" target="_blank">
    <img alt="License: MIT" src="https://img.shields.io/github/license/Stefouch/foundry-year-zero-roller"/>
  </a>
  <a href="https://www.patreon.com/Stefouch">
    <img src="https://img.shields.io/badge/donate-patreon-F96854.svg" alt="Patreon">
  </a>
  <a href="https://twitter.com/stefouch" target="_blank">
    <img alt="Twitter: stefouch" src="https://img.shields.io/twitter/follow/stefouch.svg?style=social"/>
  </a>
</p>
<p>This is a collection of helper methods and classes for rolling <strong>Year Zero Engine</strong> dice in the Foundry VTT.</p>
<p>Features:</p>
<ul>
<li>Simple integration: add the <code>yzur.js</code> and the <code>/templates</code> in your project and initialize them in your main init script</li>
<li>Documented methods</li>
<li>Support for all Year Zero games</li>
<li>Custom Roll class with many extra getters for stunts, banes, traumas, gear damage, mishaps, ammo, etc.</li>
<li>Custom DiceTerm classes for each Year Zero dice</li>
<li>Push support</li>
<li>Custom roll template with push stack and push button</li>
<li>Customisable settings</li>
<li>Compatible with Foundry 0.8.8 and V9</li>
<li>Compatible with Dice So Nice!</li>
</ul>
<p>Not included:</p>
<ul>
<li>Roll dialog</li>
<li>Chat Message push button listener (you have to create one and call the roll.push() method, see example below)</li>
<li>Dice So Nice configuration</li>
</ul>
<h1>How to Set Up</h1>
<ol>
<li>
<p>Copy the <code>yzur.js</code> library (see releases) in your Foundry system (e.g. in a 'lib' folder).</p>
</li>
<li>
<p>(optional) Copy the templates in your Foundry system:</p>
</li>
</ol>
<pre class="prettyprint source lang-css"><code>templates/
  dice/
    infos.hbs
    roll.hbs
    tooltip.hbs
</code></pre>
<ol start="2">
<li>In your main script, import the library:</li>
</ol>
<pre class="prettyprint source lang-js"><code>import { YearZeroRollManager } from './lib/yzur.js';
</code></pre>
<ol start="3">
<li>In your init hook, initialize the dice with the <code>.register()</code> method.<br/>
• Replace <code>'&lt;your_game&gt;'</code> with the code of the game to be used.<br/>
• The second argument is an object of options. Add there the paths to the three templates and your own custom settings.</li>
</ol>
<pre class="prettyprint source lang-js"><code>Hooks.once('init', function () {
  YearZeroRollManager.register('&lt;your_game>', {
    'ROLL.chatTemplate': 'systems/your_system/templates/dice/roll.hbs',
    'ROLL.tooltipTemplate': 'systems/your_system/templates/dice/tooltip.hbs',
    'ROLL.infosTemplate': 'systems/your_system/templates/dice/infos.hbs',
  });
});
</code></pre>
<ol start="4">
<li>
<p>The settings are stored in the Foundry's <code>CONFIG.YZUR</code> global variable. For more details and how to customize them, see the constant <code>&quot;YZUR&quot;</code> in the <code>yzur.js</code> library.</p>
</li>
<li>
<p>Read the <a href="https://stefouch.github.io/foundry-year-zero-roller/">documentation</a>.</p>
</li>
</ol>
<h1>How to Use</h1>
<h2>Roll</h2>
<p>Use the <code>YearZeroRoll</code> class, which extends the default Foundry's Roll class.</p>
<p>Either create your own formula with it, or use the <code>.forge()</code> static method.</p>
<pre class="prettyprint source lang-js"><code>import { YearZeroRoll } from './lib/yzur.js';

// Set the dice quantities.
let dice = [
  {
    term: 'b', // Base dice
    number: 5,
  },
  {
    term: 's', // Skill dice
    number: 3,
  },
  {
    term: 'g' // Gear dice
    number: 2
    flavor: 'Sword'
  }
];

// Set options for the roll.
let options = {
  name: 'My Super Year Zero Roll',
  maxPush: 1,
};

// Create a roll. Use any of the following methods:
let roll;
roll = Roll.create('&lt;my_formula>', { yzur: true });
roll = YearZeroRoll.create('&lt;my_formula>');
roll = new YearZeroRoll('&lt;my_formula>', data, options);
roll = YearZeroRoll.forge(dice, data, options);

// Roll the roll, same methods as usual
await roll.roll({ async: true });
await roll.toMessage();
</code></pre>
<h2>Modify</h2>
<p>The <code>.modify(n)</code> method allows you to add a difficulty modifier to the roll.</p>
<pre class="prettyprint source lang-js"><code>let roll = YearZeroRoll.forge(dice);

// Modify the roll.
let modifier = -1;
await roll.modify(modifier);

// Roll and send.
await roll.roll({ async: true });
await roll.toMessage();
</code></pre>
<p>There are also two other methods to change the quantity of dice in the roll:</p>
<pre class="prettyprint source lang-js"><code>// Add dice.
await roll.addDice(1, 'skill');

// Remove dice.
roll.removeDice(1, 'skill');
</code></pre>
<h2>Push</h2>
<pre class="prettyprint source lang-js"><code>let roll = YearZeroRoll.forge(dice);

// Push the roll.
await roll.push({ async: true });
</code></pre>
<h3>Push from the Chat</h3>
<p>Add a listener to the button in the chat to get the roll and push it. See example below.</p>
<pre class="prettyprint source lang-js"><code>Hooks.on('renderChatMessageHTML', (app, html, data) => {
  html.on('click', '.dice-button.push', _onPush);
});

async function _onPush(event) {
  event.preventDefault();

  // Get the message.
  let chatCard = event.currentTarget.closest('.chat-message');
  let messageId = chatCard.dataset.messageId;
  let message = game.messages.get(messageId);

  // Copy the roll.
  let roll = message.rolls[0].duplicate();

  // Delete the previous message.
  await message.delete();

  // Push the roll and send it.
  await roll.push({ async: true });
  await roll.toMessage();
}
</code></pre>
<p>If you don't want to create a new message and instead edit the current message, you must call an update for the changes:</p>
<pre class="prettyprint source lang-js"><code>// Update the message (it triggers its rendering).
await message.update({ rolls: [roll.toJSON()] });
</code></pre>
<h2>Custom Template</h2>
<p>To dynamically use another template for the roll message, you can use this trick:</p>
<pre class="prettyprint source lang-js"><code>let templateData = {
  template: &quot;path_to_my_custom_template.hbs&quot;,
  flavor: &quot;my_custom_roll_flavor&quot;,
  // ...more details see YearZeroRoll#render()...
};

let messageData = {
  content: await roll.render(templateData):,
  speaker: ChatMessage.getSpeaker({ actor });
};

let rollMode = game.settings.get('core', 'rollMode');

await roll.toMessage(messageData, { rollMode });
</code></pre>
<h1>Read More</h1>
<p>Read The Fucking Manual <a href="https://stefouch.github.io/foundry-year-zero-roller/">here!</a></p>
<h1>Supported Games</h1>
<table>
<thead>
<tr>
<th style="text-align:left">Game</th>
<th style="text-align:left">Code</th>
<th style="text-align:left">Dice &amp; Denominations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Alien RPG</td>
<td style="text-align:left"><code>alien</code></td>
<td style="text-align:left"><code>skill: s</code><br/><code>stress: z</code></td>
</tr>
<tr>
<td style="text-align:left">Blade Runner RPG</td>
<td style="text-align:left"><code>br</code></td>
<td style="text-align:left"><code>brD12: 12</code><br/><code>brD10: 10</code><br/><code>brD8: 8</code><br/><code>brD6: 6</code></td>
</tr>
<tr>
<td style="text-align:left">Coriolis: The Third Horizon</td>
<td style="text-align:left"><code>cor</code></td>
<td style="text-align:left"><code>skill: s</code></td>
</tr>
<tr>
<td style="text-align:left">Forbidden Lands</td>
<td style="text-align:left"><code>fbl</code></td>
<td style="text-align:left"><code>base: b</code><br/><code>skill: s</code><br/><code>gear: g</code><br/><code>neg: n</code><br/><code>artoD8: 8</code><br/><code>artoD10: 10</code><br/><code>artoD12: 12</code></td>
</tr>
<tr>
<td style="text-align:left">Mutant: Year Zero</td>
<td style="text-align:left"><code>myz</code></td>
<td style="text-align:left"><code>base: b</code><br/><code>skill: s</code><br/><code>gear: g</code><br/><code>neg: n</code></td>
</tr>
<tr>
<td style="text-align:left">Tales From the Loop</td>
<td style="text-align:left"><code>tales</code></td>
<td style="text-align:left"><code>skill: s</code></td>
</tr>
<tr>
<td style="text-align:left">Twilight 2000 (4th Edition)</td>
<td style="text-align:left"><code>t2k</code></td>
<td style="text-align:left"><code>a: 12</code><br/><code>b: 10</code><br/><code>c: 8</code><br/><code>d: 6</code><br/><code>ammo: m</code><br/><code>loc: l</code></td>
</tr>
<tr>
<td style="text-align:left">Vaesen</td>
<td style="text-align:left"><code>vae</code></td>
<td style="text-align:left"><code>skill: s</code></td>
</tr>
</tbody>
</table>
<h3>Examples of commands in the chat</h3>
<p><strong>FBL</strong> — Roll 5 base dice, 3 skill dice, 2 gear dice and one D12 artifact die:</p>
<pre class="prettyprint source"><code>/roll 5db + 3ds + 2dg + 1d12
</code></pre>
<p><strong>Alien</strong> — Roll 7 dice and 1 stress die:</p>
<pre class="prettyprint source"><code>/roll 7ds + 1dz
</code></pre>
<p><strong>Vaesen</strong> — Roll 6 dice:</p>
<pre class="prettyprint source"><code>/roll 6ds
</code></pre>
<p><strong>Twilight 2000</strong> — Roll a D10, a D8, 3 ammo dice and a location die:</p>
<pre class="prettyprint source"><code>/roll 1d10 + 1d8 + 3dm + 1dl
</code></pre>
<p><strong>Custom Pushes</strong> — Set the max number of pushes:</p>
<pre class="prettyprint source"><code>/roll 5dbnp   5 base dice     (no push)
/roll 3dsp0   3 skill dice    (max 0 push)
/roll 3dgp3   3 gear dice     (max 3 pushes)
/roll 3dbp3 + 3dsp2 + 3dgnp   (can be combined)
</code></pre>
<p><small><i>Note: For full-auto fire, you can add the modifier <code>p1000</code>.</i></small></p>
<h1>Dice So Nice</h1>
<p>DsN is supported but not configured. See the <a href="https://gitlab.com/riccisi/foundryvtt-dice-so-nice/-/wikis/API/Customization">API</a> for how to create a proper configuration for your custom dice.</p>
<h1>Author</h1>
<p align="center">
  <a href="https://stefouch.be" target="_blank">
    <img src="https://github.com/Stefouch/t2k4e/raw/master/assets/stefouch-banner.png" alt="Stefouch Gaming Lab" style="width: auto; height: auto; max-height: 100px;"/>
  </a>
  <br/>
  <span><i>Built by a fan, For the fans.</i></span>
</p>
<h3>👤 Stefouch</h3>
<ul>
<li><strong>Twitter:</strong> <a href="https://twitter.com/stefouch">@stefouch</a></li>
<li><strong>Github:</strong> <a href="https://github.com/Stefouch">@Stefouch</a></li>
<li><strong>Discord:</strong> Stefouch#5202
<ul>
<li><a href="https://discord.gg/RnaydHR">Year Zero Worlds</a></li>
<li><a href="https://discord.gg/8yAKUHZZKE">The Foundry</a></li>
</ul>
</li>
</ul>
<h1>🙏 Show Your Support</h1>
<p>Give a ⭐️ if this project helped you!</p>
<a href="https://www.patreon.com/Stefouch">
  <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" width="160">
</a>
<h1>📝 License</h1>
<p><a href="https://github.com/Stefouch/foundry-year-zero-roller/blob/master/LICENSE">MIT</a></p></article>
    </section>






            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>